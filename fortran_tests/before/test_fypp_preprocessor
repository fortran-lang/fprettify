PREPROCESSOR TEST

! IF

! Example 1

#:if DEBUG > 0
print *, "hola"
if (.not. (${cond}$)) then
   #:if ASSERT(cond)
   print *, "Assert failed!"
   #:endif
   error stop
end if
#:endif

! Example 2

#:if DEBUG > 0
print *, "hola"
if (.not. (${cond}$)) then
   #:if ASSERT(cond)
   print *, "Assert failed!"
   #:endif
   error stop
end if
#:endif

! Example 3

#:if DEBUG > 0
print *, "hola"
if (.not. (${cond}$)) then
   #:if ASSERT(cond)
   print *, "Assert failed!"
   #:endif
   error stop
end if
#:endif

! FOR

! Example 1

if (.not. (${cond}$)) then
   #:for element in list
   print *, "Element is in list!"
   #:endfor
   error stop
end if

! Example 2

if (.not. (${cond}$)) then
   #:for element in list
   print *, "Element is in list!"
   #:endfor
   error stop
end if

! Example 3

if (.not. (${cond}$)) then
   #:for element in list
   print *, "Element is in list!"
   #:endfor
   error stop
end if

! DEF

! Example 1

#:if aa > 1
print *, "Number is more than 1"
if (condition) then
   #:def something
   print *, "Added Definition!"
   #:enddef
end if
#:endif

! Example 2

#:if aa > 1
print *, "Number is more than 1"
if (condition) then
   #:def  something
   print *, "Added Definition!"
   #:enddef
end if
#:endif

! Example 3

#:if aa > 1
print *, "Number is more than 1"
if (condition) then
   #:def something
   print *, "Added Definition!"
   #:enddef
end if
#:endif

! BLOCK and CALL

! Example 1

#:def DEBUG_CODE(code)
  #:if DEBUG > 0
    $:code
  #:endif
#:enddef DEBUG_CODE

#:block DEBUG_CODE
  if (a < b) then
    print *, "DEBUG: a is less than b"
  end if
#:endblock DEBUG_CODE

#:call DEBUG_CODE
  if (a < b) then
    print *, "DEBUG: a is less than b"
  end if
#:endcall DEBUG_CODE

! Example 2

#:def DEBUG_CODE(code)
   #:if DEBUG > 0
     $:code
   #:endif
#:enddef DEBUG_CODE

  #:block DEBUG_CODE
   if (a < b) then
     print *, "DEBUG: a is less than b"
   end if
   #:endblock DEBUG_CODE


if (condition) then
#:call DEBUG_CODE
  if (a < b) then
    print *, "DEBUG: a is less than b"
  end if
#:endcall DEBUG_CODE
endif



! MUTE

! Example 1

#:if DEBUG > 0
print *, "hola"
if (.not. (${cond}$)) then
   #:mute
   print *, "Muted"
   #:endmute
   error stop
end if
#:endif

! Example 2

#:if DEBUG > 0
print *, "hola"
if (.not. (${cond}$)) then
   #:mute
   print *, "Muted"
   #:endmute
   error stop
end if
#:endif

! Example 3

#:if DEBUG > 0
print *, "hola"
if (.not. (${cond}$)) then
   #:mute
   print *, "Muted"
   #:endmute
   error stop
end if
#:endif
